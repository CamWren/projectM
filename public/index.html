<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	 <title>migrate</title>
    <!-- link to jQuery library -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="keywords" content="Rustic UI Kit Responsive, Login Form Web Template, Flat Pricing Tables, Flat Drop-Downs, Sign-Up Web Templates, Flat Web Templates, Login Sign-up Responsive Web Template, Smartphone Compatible Web Template, Free Web Designs for Nokia, Samsung, LG, Sony Ericsson, Motorola Web Design" />
    <script type="application/x-javascript">
    addEventListener("load", function() {
        setTimeout(hideURLbar, 0);
    }, false);
    function hideURLbar() {
        window.scrollTo(0, 1);
    }
    </script>
    <!-- fonts -->
    <!-- /fonts -->
    <!-- css -->
    <link href="css/reset.css" rel="stylesheet" type="text/css" media="all" />
    <link href="css/bootstrap.min.css" rel="stylesheet" type="text/css" media="all" />
    <link href="css/font-awesome.min.css" rel="stylesheet" type="text/css" media="all" />
    <link href="css/jQuery.lightninBox.css" rel="stylesheet" type="text/css" media="all" />
    <link href="css/jqvmap.css" rel="stylesheet" type="text/css" media="all" />
    <link href="css/jquery-ui.css" rel="stylesheet" type="text/css" media="all" />
    <link href="css/jquery.countdown.css" rel="stylesheet" type="text/css" media="all" />
    <link href="css/style.css" rel="stylesheet" type="text/css" media="all" />
    <link href="https://fonts.googleapis.com/css?family=Poppins:300,400,500,600,700" rel="stylesheet">
    <!-- /css -->
    <!-- /map css -->
    <style>
    #map {
        height: 500px;
        width: 100%;
    }
    </style>
    <!-- /map css -->
    <!-- link to index.js -->
    <!-- jquery -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
    <!-- Auth0 lock script -->
    <script src="https://cdn.auth0.com/js/lock/10.8/lock.min.js"></script>
    <!-- Setting the right viewport -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <!-- /javascript -->
    <script type="text/javascript" src="js/modernizr.js"></script>
    <script type="text/javascript" src="js/index.js"></script>
    <!-- /javascript -->
    <script type="text/javascript" src="js/citySurvey.js"></script>

<!--LEAFLET CODE BEGINNING-->
            <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/leaflet.css" />
            <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet.draw/0.2.3/leaflet.draw.css" />
            <script src="https://code.jquery.com/jquery-1.10.2.js"></script>
            <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/leaflet.js"></script>
            <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet.draw/0.2.3/leaflet.draw.js"></script>
            <script language="javascript">
            $(document).ready(function() {
            var map = new L.Map('map');
            L.tileLayer('http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                attribution: '&copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors'
            }).addTo(map);
            var houston = new L.LatLng(29.97, -95.35);
            map.setView(houston,10);
            var drawnItems = new L.FeatureGroup();
            map.addLayer(drawnItems);
            var drawControl = new L.Control.Draw({
                draw: {
                circle: false,
                marker: false,
                polyline: false
                },
                edit: {
                    featureGroup: drawnItems
                }
            });
            map.addControl(drawControl);
            var markers = [];
            var polygon = null;
            map.on('draw:created', function (e) {
                // remove markers and polygon from the last run
                $.each (markers, function (i) { map.removeLayer(markers[i]) });
                if (polygon != null) map.removeLayer (polygon);
                var latLngs = $.map(e.layer.getLatLngs(), function(o) {
                    return { name: "points", value: o.lat + "," + o.lng };
                });
                $.ajax({
                    url: 'https://api.simplyrets.com/properties',
                    data: latLngs,
                    beforeSend: function(xhr) {
                        xhr.setRequestHeader("Authorization", "Basic " + btoa("simplyrets:simplyrets"))
                    },
                    success: function(data) {
                        $.each (data, function (idx) {
                            var markerLocation = new L.LatLng(data[idx].geo.lat, data[idx].geo.lng);
                            var marker = new L.Marker(markerLocation);
                            map.addLayer(marker);
                            markers.push(marker);
                        });
                    }
                });
                polygon = e.layer;
                map.addLayer(e.layer);
            });
            });
            </script>
<!--LEAFLET CODE END-->

</head>

<body>

	<!-- This is where React will deploy the contents it generates -->
    <div id="app"></div>

    <div id="map-container">
        <div id="map" style="position: relative; width: 88%; margin: auto; margin-bottom: 30px;"></div>
    </div>

    <div class="container">
        <footer>
            <div class="container">
                &copy; Copyright 2017 Cameron Wren, Aryan Nawim, & Phil Mlaker
            </div>
        </footer>
     </div>
     
	<!-- All of our JS code will be transpiled into this bundle.js file -->
	<script src="bundle.js"></script>

</body>
</html>